# to run this script run:
# chmod +x .build-all
# so it can be executed on your WSL terminal

echo "Running HildenCo - AspNet Microservices"

echo "Preparing scripts..."
chmod +x ./Web/build
chmod +x ./AccountSvc/build
chmod +x ./CatalogSvc/build
chmod +x ./NewsletterSvc/build
chmod +x ./NotificationSvc/build
chmod +x ./OrderSvc/build
chmod +x ./PaymentSvc/build
chmod +x ./RecommendationSvc/build
chmod +x ./ShippingSvc/build

echo "Building images..."

for img in 'Web' 'AccountSvc' 'CatalogSvc' 'NewsletterSvc' 'NotificationSvc' 'OrderSvc' 'PaymentSvc' 'RecommendationSvc' 'ShippingSvc'
do
	echo "  [+] building $img: "
	cd $img && ./build
	echo "[DONE]"
	cd ..
done


# printf "  [+] building AccountSvc: "
# cd AccountSvc && ./build
# echo "[DONE]
# 
# printf "  [+] building Web: "
# cd CatalogSvc && ./build
# echo "[DONE]
# 
# printf "  [+] building Web: "
# cd NewsletterSvc && ./build
# echo "[DONE]
# 
# printf "  [+] building Web: "
# cd NotificationSvc && ./build
# echo "[DONE]
# 
# printf "  [+] building Web: "
# cd OrderSvc && ./build
# echo "[DONE]
# 
# printf "  [+] building Web: "
# cd PaymentSvc && ./build
# echo "[DONE]
# 
# printf "  [+] building Web: "
# cd RecommendationSvc && ./build
# echo "[DONE]
# 
# printf "  [+] building Web: "
# cd ShippingSvc && ./build
# echo "[DONE]


printf "\nDeleting unused images...\n"
docker.exe image prune -f

printf "Done! What about running `docker images` now to confirm your images were created?\n\n"
